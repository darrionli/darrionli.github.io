---
title: MySQL数据类型优化
date: 2017-08-16 16:59:50
categories: 数据库
permalink: mysql-data-types
tags:
- MySQL
- 数据库
---

>  最近在读《高性能MySQL》这本书，关于数据类型的常用优化，我认为有必要总结一下分享给大家。

### 如何选择合适的数据类型

下面有几条简单的原则有助于我们选做出更好的选择。

1. 小而简单的数据类型通常更好

   一般情况下，应该尽量使用可以正确存储数据的最小数据类型。由于更小的数据类型通常占用更少的磁盘、内存和CPU，并且处理时需要的CPU周期也更少。

   例如只需要存0~200，tinyint  unsigned 更好，后边具体数据类型会详细说明。<!--more-->

2. 尽量避免NULL

   通常情况下最好指定列为NOT NULL，除非真的需要存NULL。

在为列选择数据类型的时，第一步需要确定合适的大类型：数字、字符串、时间等。

接下来是选择具体类型，很多数据类型可以存储相同类型的数据，只是存储的长度和范围不一样、允许的精度不同，或者需要的物理空间不同。例如，DATETIME和TIMESTAMP列都可以存储相同类型的数据，然而TIMESTAMP只使用DATETIME一半的存储空间，并且会根据时区变化，具有特殊的自动更新能力。另一方面TIMESTAMP允许的时间范围要比DATETIME小得多。

### 整数类型

|    类型     | 存储空间 (Bytes) | 最小值 (Signed\|Unsigned)  |          最大值 (Signed\|Unsigned)          |
| :-------: | :----------: | :---------------------: | :--------------------------------------: |
|  tinyint  |      1       |         -128\|0         |                 127\|255                 |
| smallint  |      2       |        -32768\|0        |              32767\| 65535               |
| mediumint |      3       |       -8388608\|0       |            8388607\| 16777215            |
|    int    |      4       |     -2147483648\|0      |         2147483647\| 4294967295          |
|  bigint   |      8       | -9223372036854775808\|0 | 9223372036854775807\| 18446744073709551615 |

- 整数类型有unsigned属性，表示不允许为负值，这大致可以使正数的上限提高到一倍，有符号和无符号使用相同的存储空间，并具有相同的性能，可以根据实际情况选择类型。
- MySQL可以为整数类型指定宽度，例如int(11)，对于大多数应用这是没意义的：它不会限制值的合法范围，只是规定了MySQL的一些交互工具用来显示字符的个数。对于存储和计算来说，Int(1)和int(20)是相同的。

### 实数类型

实数是带有小数部分的数字，然而它们不只是为了存储小数部分；也可以使用decimal存储比bigint更大的整数。MySQL既支持精确类型，也支持不精确类型。
